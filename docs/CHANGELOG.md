# Changelog

## 🚀 v2.4.0 - MCP 整合與品質強化 (2026-02-11)

### ✨ 新功能

- MCP Server - 新增 Model Context Protocol 伺服器，允許 AI 助手透過標準化協議查詢與管理目錄、群組、啟動器
- 版本更新提示 - 新增非強制版本更新檢查功能
- macOS/Linux 預設啟動器 - 各平台新增對應的預設啟動器配置
- 托盤快速啟動 - 系統托盤選單新增最愛與最近使用快速啟動子選單
- 無障礙支援 - ARIA 屬性、Modal 焦點陷阱與還原、Toast aria-live、prefers-reduced-motion、語系切換同步 HTML lang

### 🔒 安全性

- XSS 防護強化 - Modal、啟動器、目錄頁面補齊 HTML/屬性轉義
- MCP 輸入驗證 - 路徑驗證、isDirectory 檢查、非空名稱驗證、1MB 請求大小限制
- IPC 驗證強化 - log-renderer-error/validate-paths 參數驗證，validate-paths 陣列上限 500
- 匯入配置驗證 - 基本匯入加入結構驗證
- 路徑驗證改進 - 允許獨立 `$`，阻擋 `${` 展開語法
- 依賴安全 - electron-builder 24.x → 26.x（修復 tar 高危漏洞）

### ⚡ 效能優化

- 搜尋防抖 - 所有搜尋輸入加入 150ms 防抖
- 配置讀取快取 - 記憶體快取消除重複磁碟讀取
- 事件委託 - UI 列表改用事件委託取代逐項綁定
- 配置原子寫入 - 改用 write-to-tmp + rename 防止寫入中損壞

### 🐛 問題修復

- 修正預設群組名稱硬編碼「預設」，改用國際化鍵值
- 修正窄寬度下搜尋列按鈕跑版
- 修正系統語系未作為 i18n 預設語言
- 修正匯入後孤兒最愛 ID 未清理
- 修正 index.html 硬編碼版本號
- 修正視窗背景色未依已儲存主題設定
- 修正 `ms-windows-store:` 協議未通過 URL 驗證
- 修正 `shell.openExternal` 未 await 且未處理錯誤
- 修正 CSS 缺失變數與重複定義
- 修正 logger 循環引用導致序列化失敗
- 移除外部 Google Fonts 依賴，改用系統字體堆疊

### 🔧 重構改進

- IPC handlers 改用 async file I/O
- 提取共用工具函式（openTerminal、getGroupDisplayName、getTerminalIcon/Name、escapeHtml）
- 清理未使用程式碼（parseCommand、未用 exports、CSS classes、stale comments、ESLint warnings）
- CI 加入 format check、ESLint、測試覆蓋率；Release workflow 擴展跨平台打包與版本一致性檢查
- 新增 IPC validators、i18n、terminal.js、配置遷移測試

### 📚 文檔

- README 新增 macOS/Linux 下載資訊與未簽署應用提示
- ARCHITECTURE.md / CLAUDE.md 補齊前端 utils 模組、跨平台配置路徑
- RELEASE.md 更新跨平台打包描述
- UI_DESIGN.md 修正字體優先順序

## 🚀 v2.3.0 - 啟動器系統重構 (2026-02-11)

### ✨ 新功能

- 檔案管理器啟動器 - 新增內建「檔案管理器」選項，可直接開啟檔案總管進入指定目錄
- 跨平台檔案管理器 - 自動偵測作業系統（Windows `explorer.exe`、macOS `open`、Linux `xdg-open`）
- 獨立啟動器 Tab - 將啟動器管理從設定頁面抽出為獨立分頁，含偵測狀態與搜尋功能
- 啟動器搜尋與過濾 - 啟動器 Tab 新增搜尋列，支援依名稱或指令即時過濾
- IDE 設定指南 - 啟動器 Tab 新增 IDE/編輯器設定指南按鈕，點擊複製啟動指令
- 匯入/匯出擴展 - 匯入/匯出功能擴展為完整啟動器設定支援
- 啟動器排序 - 設定頁面支援拖拉排序啟動器列表，同步影響下拉選單與右鍵選單
- 啟動器名稱國際化 - 內建啟動器名稱支援多語系顯示
- 概念更名 - 「終端」更名為「啟動器」，反映支援任意應用程式開啟目錄的定位

### 🐛 問題修復

- 修正匯入配置合併模式語意去重，避免重複匯入相同啟動器
- 修正最愛清單贓數據問題，自動清理孤兒 ID 與無效路徑
- 修正啟動器編輯 Modal 雙引號轉義問題
- 修正 Tab 列溢出時未自動切換純圖示模式

### 🔧 重構改進

- 品牌 icon 改為資料夾箭頭設計，新增漸層高光效果
- 清理未使用翻譯鍵，對話框標題完成國際化
- 預設 README 語系改為繁體中文
- 更新 GitHub 倉庫路徑

## 🚀 v2.2.0 - 單一實例與自動發布 (2026-01-31)

### ✨ 新功能

- 單一實例限制 - 確保應用同時只能運行一個實例，重複啟動時自動聚焦到現有視窗

### 🔧 開發流程

- GitHub Actions 自動發布 - 推送 tag 自動打包並建立 Release
- 發布流程文件更新 - 新增自動發布指南與 CHANGELOG 維護說明

## 🚀 v2.1.0 - 安全強化與路徑預警 (2026-01-26)

### 新功能

- 路徑失效預警：自動偵測並標示無效路徑
- macOS/Linux 跨平台終端驗證器支援（實驗性）
- 終端探測：自動偵測已安裝的終端
- 終端命令預覽：啟動前預覽實際執行的命令
- 進階匯出匯入：選擇性匯出、合併/覆蓋匯入
- Portable 版本開啟自動啟動時顯示限制提示
- 添加 ESLint 程式碼檢查
- 添加 Vitest 測試框架與路徑工具模組

### 安全性

- IPC 參數驗證，防止惡意輸入
- XSS 防護機制（HTML/屬性轉義）
- 路徑安全驗證，防止 shell 注入
- 日誌敏感資訊過濾

### 效能

- 驗證器快取策略優化
- DOM 快取工具模組

### 修復

- 修正 Windows 平台 WSL 路徑引號問題
- 修正群組頁面數量顯示對齊問題
- 修正 macOS 終端類型提取過於寬鬆的問題
- 修正 Portable 版本開機自動啟動失敗問題
- 修正新增/編輯目錄彈窗群組未按排序顯示

### 其他

- 套用 Prettier 格式化
- 自訂滾動條樣式配合深淺色主題
- 整合未使用的工具模組到實際程式碼
- 改進狀態管理模組

## 🚀 v2.0.0 - 全新架構 (2026-01-25)

- 5 Tab 架構（最近、最愛、群組、目錄、設定）
- 最愛功能（標記、拖拉排序）
- 群組獨立 Tab（Emoji 圖示、拖拉排序）
- 彈窗系統（新增/編輯/刪除確認）
- 應用內鍵盤快捷鍵（Ctrl+1~5, Ctrl+F, Ctrl+N）
- 拖拉排序（最愛、群組、目錄）
- 右鍵選單（選擇終端、加入最愛、編輯、刪除）

## 🚀 v1.1.0 - 多語系與主題 (2026-01-24)

- 主題切換（深色/淺色）
- 多語系（繁中/英文）
- 開機自動啟動
- 自訂終端支援
- 完整錯誤處理與日誌系統
- 安全性修復（contextIsolation）

## 🚀 v1.0.0 - 初始版本 (2026-01-24)

- 初始版本發布
- 目錄管理、終端啟動、群組分類
- 搜尋過濾、最近使用、匯出匯入
- 全域快捷鍵、系統托盤
